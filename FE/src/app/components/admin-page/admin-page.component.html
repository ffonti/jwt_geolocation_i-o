<button class="mt-2 ml-2 btn btn-blue" routerLink="/homePage">HomePage</button>

<div class="ml-[25%] space-x-1 grid grid-cols-2 w-[50%] h-full">
  <div class="relative">
    <div
      class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
    >
      <svg
        aria-hidden="true"
        class="w-5 h-5 mb-[43%] text-gray-500 dark:text-gray-400"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
        ></path>
      </svg>
    </div>
    <input
      [(ngModel)]="cerca"
      type="search"
      id="search"
      class="block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      placeholder="Cerca"
      required
    />
  </div>
  <div>
    <select
      [(ngModel)]="page"
      class="ml-[25%] w-[30%] cursor-pointer bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
    >
      <ng-container *ngFor="let page of pages">
        <option (click)="changedIndex()" [value]="page">{{ page + 1 }}</option>
      </ng-container>
    </select>
    <p class="ml-[25%]">Pagina {{ page2 }} di {{ pages.length }}</p>
  </div>
  <div>
    <input type="date" />
  </div>
</div>

<div class="grid grid-cols-12 w-[100%] mt-[1%]">
  <div class="col-span-3">
    <div
      class="cursor-pointer mr-2 justify-end flex items-center h-[100%]"
      (click)="indietro()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-10 h-10"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"
        />
      </svg>
    </div>
  </div>
  <div class="col-span-6 relative overflow-x-auto w-[100%]">
    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
      <thead
        class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
      >
        <tr>
          <th scope="col" class="px-6 py-3">
            <div class="grid grid-cols-2">
              Username
              <div *ngIf="flagUsername; else invUsername">
                <div (click)="invertedUsername()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-4 h-4 cursor-pointer"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M4.5 15.75l7.5-7.5 7.5 7.5"
                    />
                  </svg>
                </div>
              </div>
              <ng-template #invUsername>
                <svg
                  (click)="invertedUsername()"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4 cursor-pointer"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                  />
                </svg>
              </ng-template>
            </div>
          </th>
          <th scope="col" class="px-6 py-3">
            <div class="grid grid-cols-2">
              ID
              <div *ngIf="flagId; else invId">
                <div (click)="invertedId()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-4 h-4 cursor-pointer"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M4.5 15.75l7.5-7.5 7.5 7.5"
                    />
                  </svg>
                </div>
              </div>
              <ng-template #invId>
                <svg
                  (click)="invertedId()"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4 cursor-pointer"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                  />
                </svg>
              </ng-template>
            </div>
          </th>
          <th scope="col" class="px-6 py-3">
            <div class="grid grid-cols-2">
              Role
              <div *ngIf="flagRole; else invRole">
                <div (click)="invertedRole()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-4 h-4 cursor-pointer"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M4.5 15.75l7.5-7.5 7.5 7.5"
                    />
                  </svg>
                </div>
              </div>
              <ng-template #invRole>
                <svg
                  (click)="invertedRole()"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4 cursor-pointer"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                  />
                </svg>
              </ng-template>
            </div>
          </th>
          <th scope="col" class="px-6 py-3">
            <div class="grid grid-cols-2">
              Data di nascita
              <div *ngIf="flagDate; else invDate">
                <div (click)="invertedDate()">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-4 h-4 cursor-pointer"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M4.5 15.75l7.5-7.5 7.5 7.5"
                    />
                  </svg>
                </div>
              </div>
              <ng-template #invDate>
                <svg
                  (click)="invertedDate()"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-4 h-4 cursor-pointer"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                  />
                </svg>
              </ng-template>
            </div>
          </th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let user of currentUsers">
          <ng-container
            *ngIf="user.username.includes(cerca.trim().toLowerCase())"
          >
            <!-- ||
              user.data_nascita
                .toString()
                .trim()
                .includes(data.toString().trim()) -->
            <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
              <td
                (click)="showMarkers(user)"
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white cursor-pointer"
              >
                {{ user.username }}
              </td>
              <td
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
              >
                {{ user.id }}
              </td>
              <td
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
              >
                {{ user.role }}
              </td>
              <td
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
              >
                {{ user.data_nascita }}
              </td>
            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </table>
  </div>
  <div class="col-span-3">
    <div
      class="cursor-pointer ml-2 flex items-center h-[100%]"
      (click)="avanti()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-10 h-10"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"
        />
      </svg>
    </div>
  </div>
</div>

<ng-container *ngIf="showMarker">
  <hr class="mt-[2%]" />

  <div class="grid grid-cols-12 w-[100%] mt-[1%]">
    <div class="col-span-3"></div>
    <div class="col-span-6 relative overflow-x-auto w-[100%]">
      <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
        <thead
          class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
        >
          <tr>
            <th scope="col" class="px-6 py-3">Nome</th>
            <th scope="col" class="px-6 py-3">Latitudine</th>
            <th scope="col" class="px-6 py-3">Longitudine</th>
            <th scope="col" class="px-6 py-3">ID</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let marker of allUserMarkers">
            <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
              <td
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
              >
                {{ marker.name }}
              </td>
              <td
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
              >
                {{ marker.lat }}
              </td>
              <td
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
              >
                {{ marker.lng }}
              </td>
              <td
                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
              >
                {{ marker.id }}
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    <div class="col-span-3"></div>
  </div>
</ng-container>
